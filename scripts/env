#! /bin/bash

if [ -n "${ODL_VERSION}" ]; then
    if [ -n "${DOCKER_TAG}" ]; then
        export ODL_VERSION=${DOCKER_TAG}
    else
        export ODL_VERSION=0.13.1
    fi
fi

if [ -n "${PARENT_IMAGE}" ]; then
    if [[ ${ODL_VERSION} =~ 0\.[1-9]\.[0-9]* ]]; then
        export PARENT_IMAGE=openjdk:8-jre-slim-buster
    else
        export PARENT_IMAGE=openjdk:11-jre-slim-buster
    fi
fi

if [ -n "${DISTRIBUTION_URL}" ]; then
    export DISTRIBUTION_URL=https://nexus.opendaylight.org/content/repositories/opendaylight.release/org/opendaylight/integration/opendaylight/$ODL_VERSION/opendaylight-$ODL_VERSION.tar.gz
fi

cat <<ENDOFCAT
################
Build args:

ODL_VERSION:      ${ODL_VERSION}
PARENT_IMAGE:     ${PARENT_IMAGE}
DISTRIBUTION_URL: ${DISTRIBUTION_URL}

Dockerhub env:

SOURCE_BRANCH:   ${SOURCE_BRANCH}
SOURCE_COMMIT:   ${SOURCE_COMMIT}
COMMIT_MSG:      ${COMMIT_MSG}
DOCKER_REPO:     ${DOCKER_REPO}
DOCKERFILE_PATH: ${DOCKERFILE_PATH}
DOCKER_TAG:      ${DOCKER_TAG}
IMAGE_NAME:      ${IMAGE_NAME}

################
ENDOFCAT
